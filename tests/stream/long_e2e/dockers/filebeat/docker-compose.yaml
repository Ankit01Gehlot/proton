version: "3.8"

services:

  # How to Tune Elastic Beats Performance: A Practical Example with Batch Size, Worker Count, and More
  # https://www.elastic.co/blog/how-to-tune-elastic-beats-performance-a-practical-example-with-batch-size-worker-count-and-more?blade=tw&hulk=social
  filebeat:
      image: docker.elastic.co/beats/filebeat:6.6.0
      container_name: filebeat
      user: root
      environment:
          - strict.perms=false
      volumes:
          - './filebeat.yml:/usr/share/filebeat/filebeat.yml:rw'
          - '${PROTON_LOG_PATH}:/usr/share/services/proton/logs/'
          - '${NEUTRON_LOG_PATH}:/usr/share/services/neutron/logs/'
          - '/var/run/docker.sock:/var/run/docker.sock:ro'